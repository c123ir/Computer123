# مستندات فرم‌ساز (Form Builder)

## معرفی
فرم‌ساز یک ماژول قدرتمند برای ایجاد و مدیریت فرم‌های پویا است. این ماژول به کاربران اجازه می‌دهد تا بدون نیاز به کدنویسی، فرم‌های سفارشی خود را ایجاد، ویرایش و مدیریت کنند.

## ساختار پروژه

```
src/modules/form-builder/
├── components/
│   ├── FormBuilder/
│   │   ├── FormBuilder.tsx     # کامپوننت اصلی فرم‌ساز
│   │   ├── FieldsPanel.tsx     # پنل انتخاب فیلدها
│   │   ├── PreviewPanel.tsx    # پیش‌نمایش فرم
│   │   └── SettingsPanel.tsx   # تنظیمات فیلدها
│   ├── FormsList/
│   │   ├── FormsList.tsx       # لیست فرم‌ها
│   │   ├── FormCard.tsx        # کارت نمایش فرم
│   │   └── CreateFormModal.tsx # مودال ایجاد فرم
│   └── index.ts                # export کامپوننت‌ها
├── hooks/
│   ├── useFormBuilder.ts       # هوک اصلی فرم‌ساز
│   └── useFormsAPI.ts          # هوک ارتباط با API
├── types/
│   ├── form.types.ts           # تایپ‌های مربوط به فرم
│   ├── field.types.ts          # تایپ‌های مربوط به فیلدها
│   └── database.types.ts       # تایپ‌های مربوط به دیتابیس
└── services/
    └── forms.service.ts        # سرویس‌های API
```

## قابلیت‌های اصلی

### 1. مدیریت فرم‌ها
- نمایش لیست فرم‌ها در دو حالت گرید و لیست
- جستجو و فیلتر کردن فرم‌ها
- مرتب‌سازی بر اساس نام، تاریخ ایجاد و آخرین ویرایش
- مدیریت وضعیت فرم‌ها (پیش‌نویس، منتشر شده، بایگانی شده)
- امکان کپی، ویرایش و حذف فرم‌ها

### 2. ویرایشگر فرم
- رابط کاربری Drag & Drop برای چیدمان فیلدها
- پشتیبانی از انواع فیلدها:
  - متنی: متن کوتاه، متن بلند، ایمیل، تلفن، URL
  - عددی: عدد، امتیازدهی، اسلایدر
  - انتخابی: چک‌باکس، رادیو، لیست کشویی
  - تاریخ و زمان
  - فایل و تصویر
  - امضا
- تنظیمات پیشرفته برای هر فیلد:
  - اعتبارسنجی (validation)
  - ظاهر و استایل
  - مقادیر پیش‌فرض
  - شروط نمایش

### 3. پیش‌نمایش فرم
- پیش‌نمایش زنده (Real-time)
- نمایش در سه حالت دسکتاپ، تبلت و موبایل
- شبیه‌سازی تعامل کاربر با فرم

### 4. تنظیمات فرم
- تنظیمات عمومی:
  - عنوان و توضیحات
  - دسته‌بندی و برچسب‌ها
  - وضعیت انتشار
- تنظیمات ظاهری:
  - تم و رنگ‌بندی
  - فونت و اندازه متن
  - فاصله‌گذاری و حاشیه‌ها
- تنظیمات پیشرفته:
  - ذخیره خودکار
  - نمایش نوار پیشرفت
  - پیام‌های موفقیت و خطا

## نحوه استفاده

### 1. نمایش لیست فرم‌ها
```tsx
import { FormsList } from '../../modules/form-builder/components';

const FormsPage: React.FC = () => {
  return (
    <FormsList
      onSelectForm={(form) => {
        // handle form selection
      }}
    />
  );
};
```

### 2. ویرایش فرم
```tsx
import { FormBuilder } from '../../modules/form-builder/components';

const EditForm: React.FC = () => {
  return (
    <FormBuilder
      formId="form-id"
      onSave={() => {
        // handle save
      }}
      onCancel={() => {
        // handle cancel
      }}
    />
  );
};
```

## مدیریت State

### 1. هوک useFormBuilder
این هوک مسئول مدیریت state داخلی فرم‌ساز است:
- مدیریت فیلدها و تنظیمات
- ذخیره خودکار
- Undo/Redo
- اعتبارسنجی

### 2. هوک useFormsAPI
این هوک مسئول ارتباط با API است:
- CRUD عملیات فرم‌ها
- مدیریت وضعیت درخواست‌ها
- مدیریت خطاها
- Cache کردن داده‌ها

## استراتژی‌های پیاده‌سازی

### 1. معماری کامپوننت‌ها
- استفاده از الگوی Compound Components
- جداسازی منطق از UI با استفاده از هوک‌ها
- استفاده از TypeScript برای type safety

### 2. مدیریت State
- استفاده از React Query برای مدیریت state سمت سرور
- استفاده از React Context برای state‌های مشترک
- استفاده از local state برای state‌های کامپوننت‌محور

### 3. استایل‌دهی
- استفاده از Tailwind CSS برای استایل‌های پایه
- پشتیبانی از تم تاریک (dark mode)
- استایل‌های سفارشی برای هر فیلد

### 4. بهینه‌سازی
- استفاده از React.memo برای جلوگیری از رندر مجدد
- استفاده از useMemo و useCallback برای بهینه‌سازی محاسبات
- Lazy loading برای کامپوننت‌های سنگین

## برنامه‌های آینده

### 1. قابلیت‌های جدید
- [ ] پشتیبانی از فیلدهای پیشرفته (نقشه، ویرایشگر متن غنی)
- [ ] منطق شرطی پیشرفته برای فیلدها
- [ ] قالب‌های آماده فرم
- [ ] Import/Export فرم‌ها

### 2. بهبودها
- [ ] بهبود رابط کاربری موبایل
- [ ] افزودن انیمیشن‌های بیشتر
- [ ] بهبود عملکرد برای فرم‌های بزرگ
- [ ] پشتیبانی از زبان‌های بیشتر

### 3. مستندات
- [ ] افزودن JSDoc برای تمام کامپوننت‌ها
- [ ] ایجاد Storybook برای کامپوننت‌ها
- [ ] نمونه‌های بیشتر از نحوه استفاده
- [ ] راهنمای توسعه‌دهندگان 